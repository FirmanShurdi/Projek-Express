"use strict";var express=require("express"),router=express.Router(),conn=require("../db");router.get("/",function(r,i){conn.query("\n    SELECT o.id, o.nama, o.kategori_id, o.deskripsi, o.gambar, o.audio, k.nama_kategori \n    FROM objek o \n    JOIN kategori k ON o.kategori_id = k.id\n  ",function(r,o){if(r)throw r;conn.query("SELECT * FROM kategori",function(r,e){if(r)throw r;i.render("kategori/index",{objek:o,kategori:e})})})}),router.get("/create",function(r,o){conn.query("SELECT * FROM kategori",function(r,e){if(r)throw r;o.render("kategori/create",{kategori:e})})}),router.post("/create",function(r,e){var o=r.body,i=o.nama,t=o.kategori_id,n=o.deskripsi,a=o.gambar,d=o.audio;conn.query("\n    INSERT INTO objek (nama, kategori_id, deskripsi, gambar, audio) \n    VALUES (?, ?, ?, ?, ?)\n  ",[i,t,n,a,d],function(r){if(r)throw r;e.redirect("/kategori")})}),router.get("/edit/:id",function(r,i){var e=r.params.id;conn.query("SELECT * FROM objek WHERE id = ?",[e],function(r,e){if(r)throw r;var o=e[0];conn.query("SELECT * FROM kategori",function(r,e){if(r)throw r;i.render("kategori/edit",{objek:o,kategori:e})})})}),router.post("/edit/:id",function(r,e){var o=r.params.id,i=r.body,t=i.nama,n=i.kategori_id,a=i.deskripsi,d=i.gambar,u=i.audio;conn.query("\n    UPDATE objek \n    SET nama = ?, kategori_id = ?, deskripsi = ?, gambar = ?, audio = ? \n    WHERE id = ?\n  ",[t,n,a,d,u,o],function(r){if(r)throw r;e.redirect("/kategori")})}),router.get("/delete/:id",function(r,e){conn.query("DELETE FROM objek WHERE id = ?",[r.params.id],function(r){if(r)throw r;e.redirect("/kategori")})}),module.exports=router;
//# sourceMappingURL=kategori.min.js.map
