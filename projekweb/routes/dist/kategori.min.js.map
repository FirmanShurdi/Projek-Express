{"version":3,"sources":["kategori.js"],"names":["express","require","router","Router","get","req","res","conn","query","err","objek","kategori","render","post","_req$body","body","nama","kategori_id","deskripsi","gambar","audio","redirect","id","params","results"],"mappings":"aAAA,IAAMA,QAAUC,QAAQ,WAClBC,OAASF,QAAQG,SADjBH,KAAOC,QAAU,SAKvBC,OAAOE,IAAI,IAAK,SAACC,EAAKC,GAMpBC,KAAKC,MATMP,iKASK,SAAAQ,EAAAC,GACd,GAAID,EAAK,MAAMA,EACfF,KAAKC,MAAM,yBAA0B,SAAAC,EAAAE,GACnC,GAAIF,EAAK,MAAMA,EACfH,EAAIM,OAAO,iBAAkB,CAAAF,MAAAA,EAAAC,SAAAA,UAGlCT,OAEDE,IAAA,UAAA,SAAAC,EAAAC,GAEEC,KAAKC,MAAM,yBAA0B,SAACC,EAAKE,GAD7CT,GAAOE,EAAI,MAAAK,EACTF,EAAKC,OAAM,kBAAA,CAAAG,SAAAA,QAGVT,OAHDW,KAAA,UAAA,SAAAR,EAAAC,GAAA,IAAAQ,EAMFT,EAAAU,KAAAC,EANEF,EAMFE,KAAAC,EANEH,EAMFG,YAAAC,EANEJ,EAMFI,UAAAC,EANEL,EAMFK,OAAAC,EANEN,EAMFM,MACqCb,KACrBU,MACL,yGAF0B,CAAAD,EAAAC,EACrBA,EADqBE,EAAAC,GAAA,SAAAX,GAAA,GACRS,EAAAA,MADQT,EAAAH,EACGa,SADH,iBAQjCb,OAAGF,IAACiB,YAAS,SAAAhB,EAAbC,GACD,IAHDgB,EAAAjB,EAAAkB,OAAAD,GANFf,KAYAC,MAAA,mCAAA,CAAAc,GAAA,SAAAb,EAAAe,GAII,GAAIf,EAAK,MAAMA,EAHnBP,IAAAQ,EAAWc,EAAa,GACtBjB,KAAQC,MAAOe,yBAAf,SAAAd,EAAAE,GACI,GAACH,EAAM,MAAAC,EACTH,EAAIG,OAAK,gBAAA,CAAAC,MAAAA,EAAAC,SAAAA,UAI8BA,OAAAA,KAAAA,YAAAA,SAAAA,EAAAA,GAAT,IAA5BW,EAAAjB,EAAAkB,OAAAD,GAAqCX,EAFvCN,EAAAU,KAAAC,EAEuCL,EAFvCK,KAAAC,EAEuCN,EAFvCM,YAAAC,EAEuCP,EAFvCO,UAAAC,EAEuCR,EAFvCQ,OAAAC,EAEuCT,EAFvCS,MAQmCb,KAAAC,MAXrC,sHAWqC,CAEmBH,EAAIU,EAFvBG,EAAAC,EAAAC,EAAAE,GAAA,SAAAb,GAAA,GAE7BO,EAF6B,MAAAP,EAAAH,EAEvBW,SAFuB,iBAQrCV,OAAKC,IAAAA,cAAkBS,SAAAA,EAAAA,GACrBV,KAAAC,MAAS,iCAAA,CAAAH,EAAAkB,OAAAD,IAAA,SAAAb,GACTH,GAAIe,EAAAA,MAASZ,EAFfH,EAAAe,SAAA,iBAQAd,OAAKC,QAAMN","file":"kategori.min.js","sourcesContent":["const express = require('express');\r\nconst router = express.Router();\r\nconst conn = require('../db');\r\n\r\n// INDEX\r\nrouter.get('/', (req, res) => {\r\n  const sql = `\r\n    SELECT o.id, o.nama, o.kategori_id, o.deskripsi, o.gambar, o.audio, k.nama_kategori \r\n    FROM objek o \r\n    JOIN kategori k ON o.kategori_id = k.id\r\n  `;\r\n  conn.query(sql, (err, objek) => {\r\n    if (err) throw err;\r\n    conn.query('SELECT * FROM kategori', (err, kategori) => {\r\n      if (err) throw err;\r\n      res.render('kategori/index', { objek, kategori });\r\n    });\r\n  });\r\n});\r\n\r\n// CREATE FORM\r\nrouter.get('/create', (req, res) => {\r\n  conn.query('SELECT * FROM kategori', (err, kategori) => {\r\n    if (err) throw err;\r\n    res.render('kategori/create', { kategori });\r\n  });\r\n});\r\n\r\n// CREATE POST\r\nrouter.post('/create', (req, res) => {\r\n  const { nama, kategori_id, deskripsi, gambar, audio } = req.body;\r\n  const sql = `\r\n    INSERT INTO objek (nama, kategori_id, deskripsi, gambar, audio) \r\n    VALUES (?, ?, ?, ?, ?)\r\n  `;\r\n  conn.query(sql, [nama, kategori_id, deskripsi, gambar, audio], (err) => {\r\n    if (err) throw err;\r\n    res.redirect('/kategori');\r\n  });\r\n});\r\n\r\n// EDIT FORM\r\nrouter.get('/edit/:id', (req, res) => {\r\n  const id = req.params.id;\r\n  conn.query('SELECT * FROM objek WHERE id = ?', [id], (err, results) => {\r\n    if (err) throw err;\r\n    const objek = results[0];\r\n    conn.query('SELECT * FROM kategori', (err, kategori) => {\r\n      if (err) throw err;\r\n      res.render('kategori/edit', { objek, kategori });\r\n    });\r\n  });\r\n});\r\n\r\n// EDIT POST\r\nrouter.post('/edit/:id', (req, res) => {\r\n  const id = req.params.id;\r\n  const { nama, kategori_id, deskripsi, gambar, audio } = req.body;\r\n  const sql = `\r\n    UPDATE objek \r\n    SET nama = ?, kategori_id = ?, deskripsi = ?, gambar = ?, audio = ? \r\n    WHERE id = ?\r\n  `;\r\n  conn.query(sql, [nama, kategori_id, deskripsi, gambar, audio, id], (err) => {\r\n    if (err) throw err;\r\n    res.redirect('/kategori');\r\n  });\r\n});\r\n\r\n// DELETE\r\nrouter.get('/delete/:id', (req, res) => {\r\n  conn.query('DELETE FROM objek WHERE id = ?', [req.params.id], (err) => {\r\n    if (err) throw err;\r\n    res.redirect('/kategori');\r\n  });\r\n});\r\n\r\nmodule.exports = router;\r\n"]}